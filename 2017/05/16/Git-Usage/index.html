<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="git,git remote," />





  <link rel="alternate" href="/atom.xml" title="留阵～风～" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/images/lzffavicon.ico?v=5.1.1" />






<meta name="description" content="公司前段时间已经从svn中迁移到git，但是发现开发在使用的过程中会遇到很多的问题。所以打算把自己学习的整理的笔记通过博客分享出来，并且后续会更新遇到的一些问题以及解决，如有时间也会后续详细整理一些操作。建议大家抽空看看《Git权威指南》，这本书比较系统讲述知识点。本博客主要是面向对工作使用Git而未深入了解的人。当然我觉得是适合新手的，git老司机可以查阅补漏或者可以评论补充 :)   一、名">
<meta name="keywords" content="git,git remote">
<meta property="og:type" content="article">
<meta property="og:title" content="【原创】带你更好地使用Git">
<meta property="og:url" content="http://jamfliu.github.io/2017/05/16/Git-Usage/index.html">
<meta property="og:site_name" content="留阵～风～">
<meta property="og:description" content="公司前段时间已经从svn中迁移到git，但是发现开发在使用的过程中会遇到很多的问题。所以打算把自己学习的整理的笔记通过博客分享出来，并且后续会更新遇到的一些问题以及解决，如有时间也会后续详细整理一些操作。建议大家抽空看看《Git权威指南》，这本书比较系统讲述知识点。本博客主要是面向对工作使用Git而未深入了解的人。当然我觉得是适合新手的，git老司机可以查阅补漏或者可以评论补充 :)   一、名">
<meta property="og:updated_time" content="2017-05-19T14:59:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【原创】带你更好地使用Git">
<meta name="twitter:description" content="公司前段时间已经从svn中迁移到git，但是发现开发在使用的过程中会遇到很多的问题。所以打算把自己学习的整理的笔记通过博客分享出来，并且后续会更新遇到的一些问题以及解决，如有时间也会后续详细整理一些操作。建议大家抽空看看《Git权威指南》，这本书比较系统讲述知识点。本博客主要是面向对工作使用Git而未深入了解的人。当然我觉得是适合新手的，git老司机可以查阅补漏或者可以评论补充 :)   一、名">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://jamfliu.github.io/2017/05/16/Git-Usage/"/>





  <title>【原创】带你更好地使用Git | 留阵～风～</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?3fb9e4d48bc478a2892d60f9e3fe51be";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>











  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">留阵～风～</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">人咬得菜根，则百事可做</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://jamfliu.github.io/2017/05/16/Git-Usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jamefeng">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/lzf.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="留阵～风～">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">【原创】带你更好地使用Git</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-16T18:58:35+08:00">
                2017-05-16
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/随笔/" itemprop="url" rel="index">
                    <span itemprop="name">随笔</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/05/16/Git-Usage/" class="leancloud_visitors" data-flag-title="【原创】带你更好地使用Git">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          


          
            <div class="post-wordcount">
              
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                <span title="字数统计">
                  5,521
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                <span title="阅读时长">
                  21
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>公司前段时间已经从svn中迁移到git，但是发现开发在使用的过程中会遇到很多的问题。所以打算把自己学习的整理的笔记通过博客分享出来，并且后续会更新遇到的一些问题以及解决，如有时间也会后续详细整理一些操作。建议大家抽空看看《Git权威指南》，这本书比较系统讲述知识点。<br>本博客主要是面向对工作使用Git而未深入了解的人。当然我觉得是适合新手的，git老司机可以查阅补漏或者可以评论补充 :) </p>
</blockquote>
<h2 id="一、名词解释"><a href="#一、名词解释" class="headerlink" title="一、名词解释"></a>一、名词解释</h2><ul>
<li><strong><em>Git</em></strong>:是一款免费的、开源的、分布式的版本控制系统。旨在快速高效地处理无论规模大小的任何软件工程。<br>　　每一个 Git克隆 都是一个完整的文件库，含有全部历史记录和修订追踪能力，不依赖于网络连接或中心服务器。其最大特色就是“分支”及“合并”操作非常快速、简便。
　　</li>
<li><p><strong><em>工作空间</em></strong>: (工作树,working directory, working tree, working space)我们在硬盘中创建的文件， 在编辑器可直观显示。<br>官方解释：</p>
<blockquote>
<p>The working tree is a single checkout of one version of the project. These files are pulled out of the compressed database in the Git directory and placed on disk for you to use or modify.</p>
</blockquote>
</li>
<li><p><strong><em>缓存区</em></strong>: (暂存区, index, staged spashot, stage, staging Area )是工作空间和本地仓库的中转站，工作空间可通过add到缓存区。提交代码、解决冲突的中转站。<br> 官方解释：</p>
<blockquote>
<p>The staging area is a file, generally contained in your Git directory, that stores information about what will go into your next commit. It’s sometimes referred to as the “index”, but it’s also common to refer to it as the staging area.</p>
<p>The basic Git workflow goes something like this:<br>　　You modify files in your working tree.<br>　　You stage the files, adding snapshots of them to your staging area.<br>　　You do a commit, which takes the files as they are in the staging area and stores that snapshot permanently to your Git directory.</p>
</blockquote>
</li>
<li><p><strong><em>本地仓库</em></strong>: (local repo, commit history)在本地存储提交变动的。</p>
</li>
<li><strong><em>远程仓库</em></strong>: (remote repo)在远程用于存储提交变动的。</li>
<li><strong><em>Git的提交操作流程</em></strong>：本地更改之后，流程顺序如下<br> <strong>工作空间</strong> –<em>add</em>(或叫<em>index</em>)–&gt;<strong>暂存区</strong>–<em>commit</em>–&gt;<strong>本地仓库</strong>–<em>push</em>–&gt;<strong>远程仓库</strong></li>
</ul>
<h2 id="二、Git和SVN的对比"><a href="#二、Git和SVN的对比" class="headerlink" title="二、Git和SVN的对比"></a>二、Git和SVN的对比</h2><blockquote>
<p>我们公司对svn倒是没有使用很多高级的东西。但我们要用好它，需要我们了解更多。接下来我们就通过Git和SVN对比的优劣势，来更深入地了解Git。</p>
</blockquote>
<h3 id="Git的优势"><a href="#Git的优势" class="headerlink" title="Git的优势"></a>Git的优势</h3><h4 id="1-操作速度快"><a href="#1-操作速度快" class="headerlink" title="1. 操作速度快"></a>1. 操作速度快</h4><p> 主要列出一些操作来说明速度快。</p>
<ul>
<li>提交快：本地的仓库的提交都是针对本地的，而不是像svn上传到中央服务器。</li>
<li>合并快：支持同一目录下即可切换不同的分支，合并的速度远比svn快。</li>
<li>查看历史快</li>
</ul>
<h4 id="2-支持离线工作，减轻解决合并的冲突的工作，更好地协同开发"><a href="#2-支持离线工作，减轻解决合并的冲突的工作，更好地协同开发" class="headerlink" title="2. 支持离线工作，减轻解决合并的冲突的工作，更好地协同开发"></a>2. 支持离线工作，减轻解决合并的冲突的工作，更好地协同开发</h4><p>　　git把内容按元数据方式存储，完整克隆版本库。所有版本信息位于.git目录中，它是处于你的机器上的一个克隆版的版本库，它拥有中心版本库上所有的东西，例如标签、分支、版本记录等。<br>　　所以可以在本地操作指令，例如提交、查看历史、合并、创建分支等。即便出问题，在你本地的操作并不影响了其他的开发者操作。
　　</p>
<h4 id="3-更好的回退机制"><a href="#3-更好的回退机制" class="headerlink" title="3. 更好的回退机制"></a>3. 更好的回退机制</h4><p>　　这个支持回退 你index(即 add)或者commit的一个问题或者整个代码的回滚，也可以撤销之前的操作。<br>　　svn也是支持回退，一般是重新提交修复，但是假设过程中错误提交了超大的文件，想在历史记录永远删除以防止大文件仍然存在服务器中（因为历史记录），svn就乏力了
　　　　</p>
<h4 id="4-工作进度空间的保留"><a href="#4-工作进度空间的保留" class="headerlink" title="4. 工作进度空间的保留"></a>4. 工作进度空间的保留</h4><p>　　svn如果需要保留当前的工作进度空间，一般会在其他目录建立新的文件然后load或者切换到对应的分支，进行操作。<br>　　但是git支持在原目录上，对于在index和未index的改动的东西，可以通过git stash来保留未提交的内容（但是 unstrack file文件不行，即新增的未index的不行 ）。然后你就可以开发你的紧急任务等。</p>
<h4 id="5-分布式存储，可减少故障时丢失代码"><a href="#5-分布式存储，可减少故障时丢失代码" class="headerlink" title="5.分布式存储，可减少故障时丢失代码"></a>5.分布式存储，可减少故障时丢失代码</h4><p>　　git把内容按元数据方式存储，完整克隆版本库。所有版本信息位于.git目录中，它是处于你的机器上的一个克隆版的版本库，它拥有中心版本库上所有的东西，例如标签、分支、版本记录等。<br>　　每个代码库都存有这些信息，服务器故障时可以回复全代码及历史版本。</p>
<h4 id="6-现在已经流行，很多社区和大公司在用，有学习和使用的必要"><a href="#6-现在已经流行，很多社区和大公司在用，有学习和使用的必要" class="headerlink" title="6.现在已经流行，很多社区和大公司在用，有学习和使用的必要"></a>6.现在已经流行，很多社区和大公司在用，有学习和使用的必要</h4><p>　　 </p>
<h3 id="Git的劣势"><a href="#Git的劣势" class="headerlink" title="Git的劣势"></a>Git的劣势</h3><h4 id="学习成本不低"><a href="#学习成本不低" class="headerlink" title="学习成本不低"></a>学习成本不低</h4><ul>
<li><strong>命令多且复杂</strong><br>　　git有很多命令行，如果没认真学习或者梳理的话，很容易搞乱或者不理解。例如 git checkout是可以切换分支，也可以撤销工作空间的改动的文件，加个参数-b就变成创建新分支。因为涉及不同的分支，工作空间，缓存区，本地仓库，远程仓库，所以比如常用的撤销指令都有变的很多。比svn多却复杂。<br>　　发现现在很多人也像svn的图形操作界面一样操作git，可以简单点，但是仍然远比svn复杂。
　　</li>
<li><strong>概念多</strong><br>　　需要了解 工作空间，缓存区、索引、本地资源库、远程资源库、远程、提交、treeishes、分支和 stash。</li>
</ul>
<h4 id="资源权限控制弱"><a href="#资源权限控制弱" class="headerlink" title="资源权限控制弱"></a>资源权限控制弱</h4><p>　　虽然可以在远程对某些分支进行保护，限制写或者合并的操作，分支不支持像svn有严格的权限管理， 可以按组、按个人进行针对某个子目录的权限控制。区分读、写权限。更严格的，不支持回退操作。保证代码永远可以追踪。</p>
<h4 id="不支持支持局部更新"><a href="#不支持支持局部更新" class="headerlink" title="不支持支持局部更新"></a>不支持支持局部更新</h4><p>　　SVN由于是在每个文件夹建立一个.svn文件夹来实现管理，所以可以很简单实现局部更新、还原和权限管理。假如你只希望更新某些部分，则svn可以很好实现。同时代码写错了，同时可以很好实现局部还原，当然git也可以通过历史版本还原，但是无法简单地实现局部还原。
　　</p>
<h2 id="三、Git本地上主要功能以及常用的指令"><a href="#三、Git本地上主要功能以及常用的指令" class="headerlink" title="三、Git本地上主要功能以及常用的指令"></a>三、Git本地上主要功能以及常用的指令</h2><blockquote>
<p>主要是对常用的进行介绍，详细请看<a href=""></a></p>
</blockquote>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</div><div class="line">	<span class="keyword">public</span> String <span class="keyword">str</span>=<span class="string">"Good Str"</span>;</div><div class="line">	<span class="keyword">public</span> String getStr()&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">str</span>;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>同时并不会详细介绍每个指令，如需要详细看请通过 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git help <span class="tag">&lt;<span class="name">你要了解的指令</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="3-1-创建空Git库-或者-重置"><a href="#3-1-创建空Git库-或者-重置" class="headerlink" title="3.1 创建空Git库 或者 重置"></a>3.1 创建空Git库 或者 重置</h3><p>  cd 到你选择的目录（cd 到改目录）后执行下面指令: ([初始化仓库— 执行成功，会生成.git目录。这个.git目录存储着管理当前目录内容所属的仓库数据])    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> 到你选择的目录</div><div class="line">git init</div></pre></td></tr></table></figure>
<h3 id="3-2-查询"><a href="#3-2-查询" class="headerlink" title="3.2 查询"></a>3.2 查询</h3><h4 id="1-查看当前空间以及暂存区的状态-（git-status-git-diff）"><a href="#1-查看当前空间以及暂存区的状态-（git-status-git-diff）" class="headerlink" title="1.查看当前空间以及暂存区的状态 （git-status,git-diff）"></a>1.查看当前空间以及暂存区的状态 （git-status,git-diff）</h4><ul>
<li>查看对本地空间、暂存区的文件更改。</li>
</ul>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">git status</span></div></pre></td></tr></table></figure>
<p>  加参数<strong>-s</strong>是简略输出，默认是–long。 </p>
<ul>
<li>查看具体内容的区别</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git diff --work-diff    #会逐字进行对比</div><div class="line">git diff         		   #查看当前工作区与暂存区的差别 </div><div class="line">git diff --cached      //查看暂存区和本地仓库的差别</div></pre></td></tr></table></figure>
<p> git提取补丁的方式不是通过git diff.需要注意提取补丁和打补丁的方式与linux不一样。<br>Git提取补丁的方式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash">步骤1  提取补丁，</span></div><div class="line"><span class="meta">#</span><span class="bash">生成文件如：0001-commit-third-times-again.patch    0002-commit-G1.patch</span></div><div class="line"><span class="meta">#</span><span class="bash">其他方式例如：  git  format-patch HEAD~3...HEAD  </span></div><div class="line">git  format-patch 1.0.0...HEAD    #1.0.0 是里程碑(tag标签)其他的方式应该也可以的</div><div class="line"><span class="meta">#</span><span class="bash">步骤2. 如需要，可发送邮件</span></div><div class="line">git send-email 000*.patch</div><div class="line"><span class="meta">#</span><span class="bash">步骤3.恢复或者更新到版本库（不能使用 patch）补丁修复</span></div><div class="line">git apply xxx.patch</div></pre></td></tr></table></figure>
<p>Linux提取和补丁和修复的方式:</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">#将比较结果保存到patch文件</div><div class="line">  diff -u origin<span class="selector-class">.java</span> origin_new<span class="selector-class">.java</span> &gt; patchfile</div><div class="line">#对origin.java应用patch文件（升级），并备份（origin<span class="selector-class">.java</span><span class="selector-class">.orig</span>）  </div><div class="line">  patch -<span class="selector-tag">b</span> origin<span class="selector-class">.java</span> patchfile   </div><div class="line">#升级成功，此时origin.java和origin_new.java是一样的</div><div class="line"> diff origin<span class="selector-class">.java</span> origin_new<span class="selector-class">.java</span>  </div><div class="line">#将origin.java回退到“旧版本”,#回退成功，和“旧版本”是一样的,可通过diff origin<span class="selector-class">.java</span> origin<span class="selector-class">.java</span><span class="selector-class">.orig</span>  对比</div><div class="line"> patch -R origin<span class="selector-class">.java</span> patchfile</div></pre></td></tr></table></figure>
<ul>
<li>查看工作区和暂存区的文件</li>
</ul>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#列出工作空间的(linux指令)，或者窗口查看文件</div><div class="line"><span class="keyword">find</span> . -path <span class="string">"./.git"</span> -prune -<span class="keyword">o</span> -<span class="built_in">type</span> <span class="keyword">f</span>  -name <span class="string">"System*.java"</span> -<span class="built_in">printf</span> <span class="string">"%-20p\t%s\n"</span> 		//输出大小</div><div class="line"><span class="keyword">find</span> . -path <span class="string">"./.git"</span> -prune -<span class="keyword">o</span> -<span class="built_in">type</span> <span class="keyword">f</span>  -name <span class="string">"System*.java"</span> -<span class="keyword">print</span>  //不输出大小的</div><div class="line"></div><div class="line">#列出暂存区的文件</div><div class="line">git <span class="keyword">ls</span>-<span class="keyword">files</span>         //支持使用管道</div><div class="line">git <span class="keyword">ls</span>-<span class="keyword">files</span> -s      //额外输出 <span class="keyword">mode</span>,stage <span class="keyword">number</span></div></pre></td></tr></table></figure>
<ul>
<li>查看被忽略的文件</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">status</span> <span class="comment">--ignored -s</span></div></pre></td></tr></table></figure>
<h4 id="2-git-log查提交记录"><a href="#2-git-log查提交记录" class="headerlink" title="2.git-log查提交记录"></a>2.git-log查提交记录</h4><figure class="highlight fsharp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git log --  &lt;files&gt;        <span class="comment">//查看提交的历史（HEAD之前的，之后的版本无展示）  </span></div><div class="line">git log --pretty=oneline   <span class="comment">//只显示提交信息的第一行</span></div><div class="line"></div><div class="line">git log **-p**  <span class="meta">[&lt;file&gt;]</span>   <span class="comment">//会显示**文件的提交信息以及前后差别**</span></div><div class="line">git log --graph   		    <span class="comment">//可以用图表形式输出提交日志   --也可以看到 图表形式分支的提交</span></div><div class="line">git log --graph --pretty=oneline --abbrev-commit   <span class="comment">//查询合并情况</span></div></pre></td></tr></table></figure>
<h4 id="3-git-reflog-查操作记录"><a href="#3-git-reflog-查操作记录" class="headerlink" title="3.git-reflog 查操作记录"></a>3.git-reflog 查操作记录</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git reflog -- <span class="params">&lt;files&gt;</span>   <span class="comment">//查看历史操作记录。 查看当前仓库执行过的操作的日志</span></div></pre></td></tr></table></figure>
<p>注意：回退到某个版本之后，HEAD指向该版本，git log是查询HEAD之前的版本－－即新版的（当前HEAD之后的）看不到。 使用git reflog 查看操作记录</p>
<h4 id="4-git-blame-文件追溯"><a href="#4-git-blame-文件追溯" class="headerlink" title="4.git-blame 文件追溯"></a>4.git-blame 文件追溯</h4><p>当事情出错时，先去指责别人是人类的天性之一。如果你的产品服务器挂了，使用git blame命令可以很容易找出罪魁祸首。这个命令可以将文件中的每一行的作者、最新的变更提交和提交时间展示出来。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git blame &lt;file&gt;           <span class="comment">//会输出每一行的详细修改信息:包括SHA串,日期和作者</span></div><div class="line">git blame -L <span class="number">6</span>,+<span class="number">5</span> &lt;file&gt;   <span class="comment">//6行及后面的5行</span></div><div class="line">git blame -L <span class="number">6</span>,<span class="number">10</span> &lt;file&gt;   <span class="comment">//6~10行</span></div></pre></td></tr></table></figure>
<h4 id="5-git-branch-查看分支"><a href="#5-git-branch-查看分支" class="headerlink" title="5.git-branch 查看分支"></a>5.git-branch 查看分支</h4><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">git branch -a       <span class="comment">//查看所有版本</span></div><div class="line">git branch          <span class="comment">//查看分支</span></div><div class="line">git branch -r       <span class="comment">//查看远程分支</span></div><div class="line"></div><div class="line">git <span class="built_in">rev</span>-<span class="built_in">parse</span> --symbolic --branches  <span class="comment">//显示当前的分支</span></div><div class="line">git <span class="built_in">rev</span>-<span class="built_in">parse</span> --symbolic --tags      <span class="comment">//显示当前的tag,有术语称 里程碑</span></div></pre></td></tr></table></figure>
<h3 id="3-3-添加到暂存区"><a href="#3-3-添加到暂存区" class="headerlink" title="3.3 添加到暂存区"></a>3.3 添加到暂存区</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#方式一：添加到 暂存区(Stage或者Index)</span></div><div class="line">git <span class="keyword">add</span><span class="bash"> &lt;files&gt; </span></div><div class="line"><span class="comment">#方式二：交互式选择性界面进行添加（如果文件众多，推荐这个）,可以进行分类进行选择并且可同时选座多个</span></div><div class="line">git <span class="keyword">add</span><span class="bash"> -i</span></div><div class="line"><span class="comment">#方式三：交互式查看内容差异选择</span></div><div class="line">git <span class="keyword">add</span><span class="bash"> -p   //每项变动会让你确认， 输入 y 来暂存该块,输入 n 不暂存, 输入 e 手工编辑该块，输入，d 退出或者转到下一个文件...</span></div></pre></td></tr></table></figure>
<p> 参数 <strong><em>-u</em></strong>代表将文件的修改、文件的删除，添加到暂存区，默认就是 <strong><em>-u</em></strong>， <strong><em>-A</em></strong>代表将文件的修改，文件的删除，文件的新建，添加到暂存区。，</p>
<h3 id="3-4-提交到本地仓库"><a href="#3-4-提交到本地仓库" class="headerlink" title="3.4 提交到本地仓库"></a>3.4 提交到本地仓库</h3><figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#方式一： 基本上用这个</span></div><div class="line">git commit -m <span class="string">"描述"</span>    </div><div class="line"><span class="meta">#方式二： 危险，慎用。git add 和 git commit的结合。直接提交到仓库</span></div><div class="line">git commit -am <span class="string">"描述"</span></div></pre></td></tr></table></figure>
<h3 id="3-5-删除"><a href="#3-5-删除" class="headerlink" title="3.5 删除"></a>3.5 删除</h3><figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"> rm <span class="symbol">&lt;files&gt;</span>                 //本地删除，如需要更新暂存区，需要<span class="built_in">add</span>，如需要提交本地库则需要commit,下面的指令同理</div><div class="line"> git rm <span class="symbol">&lt;files&gt;</span>             //从HEAD中（即已提交）删除，放在stage里（未提交） </div><div class="line"> git rm --cached <span class="symbol">&lt;files&gt;</span>    //从stage中（即已<span class="built_in">index</span>）删除，放在workding里（工作空间）</div><div class="line"> </div><div class="line"> </div><div class="line">#查看哪些文件和目录会被删除</div><div class="line">git clean  -nd     //查看<span class="built_in">remove</span> Untracked <span class="keyword">files</span>(即删除本地多余的文件和目录，未<span class="built_in">add</span>新增的文件)</div><div class="line">#删除 Untracked <span class="keyword">files</span> </div><div class="line">git clean  -fd     //<span class="built_in">remove</span> Untracked <span class="keyword">files</span></div></pre></td></tr></table></figure>
<h3 id="3-6-想后悔（撤销）"><a href="#3-6-想后悔（撤销）" class="headerlink" title="3.6 想后悔（撤销）"></a>3.6 想后悔（撤销）</h3><h4 id="1-修改提交信息"><a href="#1-修改提交信息" class="headerlink" title="1.修改提交信息"></a>1.修改提交信息</h4><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit <span class="params">--amend</span>       <span class="string">//</span>修改提交信息</div></pre></td></tr></table></figure>
<h4 id="2-压缩历史记录"><a href="#2-压缩历史记录" class="headerlink" title="2.压缩历史记录"></a>2.压缩历史记录</h4><p>把这次的提交和之前的提交 这两个历史记录  压缩成一个历史记录，场景举例：例如发现已经提交的内容中有些拼写错误等，rebase将这个修改包含前一个提交之中，压缩成一个历史记录</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git rebase -<span class="selector-tag">i</span> HEAD~<span class="number">2</span>   <span class="comment">//修改提交信息</span></div></pre></td></tr></table></figure>
<h4 id="3-还原文件（可用交互方式）"><a href="#3-还原文件（可用交互方式）" class="headerlink" title="3.还原文件（可用交互方式）"></a>3.还原文件（可用交互方式）</h4><ul>
<li>撤销<strong>working directory(工作区)</strong>级别的  </li>
</ul>
<figure class="highlight vala"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#还原未add(即未index)的文件       ---&gt;从stage还原到工作区 </span></div><div class="line">git checkout  -- &lt;files&gt;</div><div class="line"><span class="meta">#还原未add(即未index)的所有文件（很危险，本地修改的会无声息地被覆盖）</span></div><div class="line">git checkout  -- .</div><div class="line"><span class="meta">#还原某个分支上文件。uncommit &amp; unstage &amp; unworkspace.当前仓库以及stage修改的会无声息地被覆盖</span></div><div class="line">   git checkout branch  -- &lt;files&gt; </div><div class="line"></div><div class="line"><span class="meta">#从历史中还原已经被删除的（假设刚提交的删除，可从上次（即HEAD~1）中恢复）</span></div><div class="line">git checkout HEAD~<span class="number">1</span> -- &lt;files&gt; 		<span class="comment">//从历史中恢复某文件</span></div></pre></td></tr></table></figure>
<ul>
<li>撤销<strong>stage(暂存区)</strong>级别的  </li>
</ul>
<figure class="highlight leaf"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">#</span><span class="title">unstage</span><span class="params">(不会回退<span class="variable">commit</span>的)</span></span>, 还原已经add(即已经index)的到工作区  --&gt;从HEAD还原到stage </div><div class="line">git reset HEAD &lt;files&gt;</div><div class="line"><span class="function"><span class="keyword">#</span><span class="title">unstage</span><span class="params">(不会回退<span class="variable">commit</span>的)</span></span>, 还原已经add(即已经index)的到工作区  --&gt;从HEAD还原到stage</div><div class="line">git reset -- &lt;files&gt;</div><div class="line">#unstage所有的文件(不会回退commit的),还原所有已经add</div><div class="line">	git reset HEAD</div><div class="line">3) </div><div class="line">   git checkout branch  -- &lt;files&gt;</div></pre></td></tr></table></figure>
<ul>
<li>撤销<strong>commit(本地仓库)</strong>级别的<br>commid_id   获取方式：①可通过 git log 取前几位即可，只要不冲突 ② git reflog查看历史操作记录。commit_id也可通过 HEAD^（上次的）  or HEAD^^（上上次的） or HEAD~100 or 版本号(前几位即可)</li>
</ul>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#uncommit &amp; unstage  <span class="comment">//，会回退commit和index信息</span></span></div><div class="line">git reset <span class="params">&lt;commit_id&gt;</span> <span class="comment">//(git reset --mixed 是默认的，会回退commit和index信息)</span></div><div class="line"><span class="meta">#uncommit,不回退index信息 </span></div><div class="line"> 	git reset --soft <span class="params">&lt;commit_id&gt;</span>  </div><div class="line"><span class="meta">#uncommit &amp; unstage &amp; unworkspace,会回退commit、index和工作区(workspace)信息</span></div><div class="line"><span class="meta">#文件全部回退到当前版本，不可恢复。慎用！！！当可以撤销操作恢复</span></div><div class="line"> 	git reset --hard <span class="params">&lt;commit_id&gt;</span>  </div><div class="line"></div><div class="line"><span class="meta">#从历史中还原已经被删除的（假设刚提交的删除，可从上次（即HEAD~1）中恢复）</span></div><div class="line">git checkout HEAD~<span class="number">1</span> -- <span class="params">&lt;files&gt;</span> 		<span class="comment">//从历史中恢复某文件</span></div></pre></td></tr></table></figure>
<ul>
<li>撤销<strong>reflog(操作)</strong>级别的（通过  git reflog查commid id）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash">会回退这个reflog下一个操作到workspace</span></div><div class="line">  git reset  &lt;commit_id&gt;  </div><div class="line"><span class="meta">#</span><span class="bash">会回退这个reflog下一个操作到index里</span></div><div class="line">  git reset  --soft  &lt;commit_id&gt;  </div><div class="line"><span class="meta">  #</span><span class="bash">会直接回退到这个版本,//文件全部回退到当前版本，git <span class="built_in">log</span>不可恢复。</span></div><div class="line"><span class="meta">#</span><span class="bash">慎用！！！但是可以通过 git reflog </span></div><div class="line">  git reset --hard  &lt;commit_id&gt;</div></pre></td></tr></table></figure>
<h3 id="3-6-分支管理"><a href="#3-6-分支管理" class="headerlink" title="3.6 分支管理"></a>3.6 分支管理</h3><h4 id="1-查看分支（git-branch）"><a href="#1-查看分支（git-branch）" class="headerlink" title="1.查看分支（git branch）"></a>1.查看分支（git branch）</h4><figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">git branch -a       <span class="comment">//查看所有版本</span></div><div class="line">git branch          <span class="comment">//查看分支</span></div><div class="line">git branch -r       <span class="comment">//查看远程分支</span></div><div class="line"></div><div class="line"></div><div class="line">git <span class="built_in">rev</span>-<span class="built_in">parse</span> --symbolic --branches  <span class="comment">//显示当前的分支</span></div><div class="line">git <span class="built_in">rev</span>-<span class="built_in">parse</span> --symbolic --tags      <span class="comment">//显示当前的tag,有术语称 里程碑</span></div></pre></td></tr></table></figure>
<h4 id="2-创建分支（git-branch-和git-checkout-b）"><a href="#2-创建分支（git-branch-和git-checkout-b）" class="headerlink" title="2.创建分支（git branch 和git checkout -b）"></a>2.创建分支（git branch 和git checkout -b）</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git checkout -b <span class="params">&lt;分支名&gt;</span>    <span class="comment">//创建分支并切换分支，等价于(git branch + git checkout)</span></div><div class="line">git branch  <span class="params">&lt;分支名&gt;</span>        <span class="comment">//创建分支</span></div></pre></td></tr></table></figure>
<h4 id="3-切换分支-git-checkout"><a href="#3-切换分支-git-checkout" class="headerlink" title="3.切换分支(git checkout)"></a>3.切换分支(git checkout)</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git checkout <span class="params">&lt;分支名&gt;</span>    <span class="comment">//切换分支（本地库已经存在的）</span></div><div class="line">git checkout -          <span class="comment">//切换回上一个分支</span></div></pre></td></tr></table></figure>
<h4 id="4-从远程更新分支-git-fetch-和-git-pull"><a href="#4-从远程更新分支-git-fetch-和-git-pull" class="headerlink" title="4.从远程更新分支(git fetch 和 git pull)"></a>4.从远程更新分支(git fetch 和 git pull)</h4><figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#获取更新但不合并(git fetch只会将本地库所关联的远程库的commit id更新至最新),但是本地不更新</span></div><div class="line">git fetch  <span class="params">&lt;远程主机名&gt;</span>         <span class="comment">//远程主机名默认是origin，一般都是这个</span></div><div class="line">   git fetch <span class="params">&lt;远程主机名&gt;</span> <span class="params">&lt;分支名&gt;</span> <span class="comment">//限定更新某个分支</span></div><div class="line"></div><div class="line"><span class="meta">#获取更新但是合并(因为涉及merge，会有冲突，请查看**4.4分支管理-解决冲突**部分)</span></div><div class="line">git pull <span class="params">&lt;远程主机名&gt;</span>     <span class="comment">//默认匹配与本地分支名一样的远程分支。</span></div><div class="line">git pull <span class="params">&lt;远程主机名&gt;</span> <span class="params">&lt;远程分支名&gt;</span>:<span class="params">&lt;本地分支名&gt;</span></div></pre></td></tr></table></figure>
<p>　　网上说git pull相当于 git fetch+git merge,从本地库结果上看一样），但是本地的远程库信息不会更新。例如，假设远程新建了分支，git pull不会更新，但是git fetch+git merge会更新，详细可看<a href="http://blog.csdn.net/a19881029/article/details/42245955" target="_blank" rel="external">git fetch和git pull之间的区别</a>.</p>
<p>　　如果git pull有冲突的时，是需要解决的。请查看<strong>4.4分支管理-解决冲突</strong>部分</p>
<h4 id="5-删除分支"><a href="#5-删除分支" class="headerlink" title="5.删除分支"></a>5.删除分支</h4> <figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash">删除本地分支</span></div><div class="line">git branch -d dev</div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash">删除远程库</span></div><div class="line">git remote rm &lt;分支名&gt;   </div><div class="line"><span class="meta"></span></div><div class="line">#<span class="bash">删除远程库已经不存在的分支(是指删除 本地远程库在远程库不存在的，不会删除本地的)</span></div><div class="line">git remote prune origin</div></pre></td></tr></table></figure>
<h4 id="6-合并分支"><a href="#6-合并分支" class="headerlink" title="6.合并分支"></a>6.合并分支</h4><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">merge</span> &lt;分支&gt;   </div><div class="line">git <span class="built_in">merge</span> <span class="comment">--no-commit &lt;分支&gt;</span></div></pre></td></tr></table></figure>
<p>举例说明，假设分支dev开发完毕，想要将它合并到主干分支master中</p>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#①首先 切换到master分支</span></div><div class="line">git checkout <span class="keyword">master</span></div><div class="line"><span class="title">#②合并分支dev</span>，为了在历史记录中明确记录下本次分支合并，我们需要创建合并提交。 ---&gt; 在合并时加上 --no-ff参数</div><div class="line">	git merge --no-ff  dev</div></pre></td></tr></table></figure>
<h4 id="7-解决冲突"><a href="#7-解决冲突" class="headerlink" title="7.解决冲突"></a>7.解决冲突</h4><p>　　现在的冲突一般由以下的指令：</p>
<figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">　git merge      <span class="comment">//自动合并，如果有同个类改动的话，可手工修改文件修复</span></div><div class="line"><span class="function"><span class="title">git</span> pull      //git fetch--&gt;</span> git merge（解决可参看git push的前两步骤）</div><div class="line"><span class="function"><span class="title">git</span> push      //git fetch--&gt;</span> <span class="function"><span class="title">git</span> merge --&gt;</span> git push</div></pre></td></tr></table></figure>
<p>下面以git push为例，因为他包含了其他指令冲突的操作，git pull冲突会报rejected的失败，解决这个冲突一般流程是：  </p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">　git fetch                 <span class="comment">//更新本地的远程库</span></div><div class="line">git merge origin/&lt;分支名&gt;  <span class="comment">//自动合并，如果有同个类改动的话，可手工修改文件修复</span></div><div class="line">                          <span class="comment">//如果改了同个类，自动合并并不会成功，可通过看  git status对应的文件，可通过修改对应的文件解决冲突。比如删除&lt;&lt;&lt;===&gt;&gt;&gt;之间的。图形界面可通过  git mergetool来进行。</span></div><div class="line">git <span class="keyword">push</span>                  <span class="comment">//push 到远程</span></div><div class="line">git <span class="built_in">log</span> -l -m --stat      <span class="comment">//可以查看合并所做的修改</span></div></pre></td></tr></table></figure>
<p>　　由于现在比较喜欢的是通过IDEA的git插件和window的Tortoise git来图形界面解决冲突。他们合并的时候会告诉你哪些是冲突的，例如Tortoise git会标红，然然一个一个地解决冲突，大体都一直，有三个窗口，一个窗口是本地，一个远程的，一个解决冲突后代码展示。解决后有些标记下已解决。</p>
<h2 id="四、Git与远程交互的一些操作"><a href="#四、Git与远程交互的一些操作" class="headerlink" title="四、Git与远程交互的一些操作"></a>四、Git与远程交互的一些操作</h2><h3 id="4-1-获取远程Git项目"><a href="#4-1-获取远程Git项目" class="headerlink" title="4.1 获取远程Git项目"></a>4.1 获取远程Git项目</h3><p>　　如果涉及到分支的操作，请查看4.4分支管理</p>
<ul>
<li><strong>从远程中克隆项目(git clone)</strong></li>
</ul>
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git <span class="keyword">clone</span> <span class="title">&lt;地址&gt;    //Git</span>支持多种协议，包括https，但通过ssh支持的原生git协议速度最快。</div><div class="line">git <span class="keyword">clone</span> <span class="title">-b</span> <span class="tag">&lt;分支名&gt;</span>  <span class="tag">&lt;地址&gt;</span>  //克隆一个 分支</div></pre></td></tr></table></figure>
<ul>
<li><strong>获取远程的分支</strong>（即在本地创建一个和远程名称一样的本地分支）</li>
</ul>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="symbol">git</span> checkout -<span class="keyword">b </span> local-<span class="keyword">branchname </span> origin/remote_branchname</div></pre></td></tr></table></figure>
<ul>
<li><strong>从远程的分支根更新本地(git fetch,git pull)</strong></li>
</ul>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#获取更新但不合并(git fetch只会将本地库所关联的远程库的commit id更新至最新),但是本地不更新</span></div><div class="line">git fetch  <span class="params">&lt;远程主机名&gt;</span>         <span class="comment">//远程主机名默认是origin，一般都是这个</span></div><div class="line">   git fetch <span class="params">&lt;远程主机名&gt;</span> <span class="params">&lt;分支名&gt;</span> <span class="comment">//限定更新某个分支</span></div><div class="line"></div><div class="line"><span class="meta">#获取更新但是合并(因为涉及merge，会有冲突，请查看**4.4分支管理-解决冲突**部分)</span></div><div class="line">git pull <span class="params">&lt;远程主机名&gt;</span>     <span class="comment">//默认匹配与本地分支名一样的远程分支。</span></div><div class="line">git pull <span class="params">&lt;远程主机名&gt;</span> <span class="params">&lt;远程分支名&gt;</span>:<span class="params">&lt;本地分支名&gt;</span></div></pre></td></tr></table></figure>
<p>　　网上说git pull相当于 git fetch+git merge,从本地库结果上看一样），但是本地的远程库信息不会更新。例如，假设远程新建了分支，git pull不会更新，但是git fetch+git merge会更新，详细可看<a href="http://blog.csdn.net/a19881029/article/details/42245955" target="_blank" rel="external">git fetch和git pull之间的区别</a>.<br>　　如果git pull有冲突的时，是需要解决的。请查看<strong>4.4分支管理-解决冲突</strong>部分</p>
<h3 id="4-2-关联远程仓库"><a href="#4-2-关联远程仓库" class="headerlink" title="4.2 关联远程仓库"></a>4.2 关联远程仓库</h3><ul>
<li><p><strong>是否拥有远程库</strong>（公司的也可以，如已拥有则跳过）</p>
<ol>
<li><p>创建SSH Key</p>
<pre><code>gm-keygen -t rsa -C &quot;youremail@example.com” #根目录（用户主目录下，如果有.ssh目录，同时这个目录下有id_rsa和id_rsa.pub这两个文件 ＝＝》已安装）
</code></pre><ol>
<li><p>登陆GitHub，打开“Account settings”，“SSH Keys”页面：点“Add SSH Key”，填上任意Title，在Key文本框里粘贴id_rsa.pub文件的内容</p>
</li>
<li><p>添加远程库<br>登陆GitHub-&gt;Create a new repo-&gt;Repository name填入learnGit， —&gt;Create repository</p>
</li>
</ol>
</li>
</ol>
</li>
<li><p><strong>本地关联远程(git remote)</strong></p>
</li>
</ul>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">git remote <span class="keyword">add</span><span class="bash"> origin  &lt;git地址&gt;  //远程主机名的名字就是origin，这是Git默认的叫法）r</span></div><div class="line"></div><div class="line"><span class="comment">#取消关联</span></div><div class="line">git remote rm origin</div></pre></td></tr></table></figure>
<ul>
<li><strong>推送到远程库(git pull)</strong></li>
</ul>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#第一次推送，把本地库提交的内容推到远程库（需私钥，故只有自己可以）</span></div><div class="line">git push -u origin <span class="params">&lt;分支名&gt;</span>    <span class="comment">//第一次一般是master,当前分支的内容就会被推送给远程仓库origin</span></div><div class="line"><span class="meta">#非第一次推送 (可能会遇到冲突，是需要解决的。请查看**4.4分支管理-解决冲突**部分)</span></div><div class="line">	git push origin  <span class="params">&lt;分支名&gt;</span></div></pre></td></tr></table></figure>
<p>　　第一次推送master分支时，加上了-u参数，1. Git不但会把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来，在以后的推送或者拉取时就可以简化命令。  2. 参数可以在推送的同时，将origin仓库的master分支设置为本地仓库当前分支upstream(上游).  添加了这个参数，将来在git pull命令从远程获取内容，省去了另外添加参数的麻烦</p>
<p>　　如果git push有冲突的时，是需要解决的。请查看<strong>4.4分支管理-解决冲突</strong>部分</p>
<p>　　
　　</p>
<p><em>PS:有任何关于的问题，欢迎来评论讨论交流。</em></p>
<h2 id="五、参考网站"><a href="#五、参考网站" class="headerlink" title="五、参考网站"></a>五、参考网站</h2><ol>
<li>参考《Git权威指南》</li>
</ol>

      
    </div>

    <div>
      
        
<div style="text-align:center;color: #ccc;font-size:14px;">
------ 本文结束 ------</div>
<br/>
<div style="border: 1px solid black">
<div style="margin-left:10px">
<span style="font-weight:blod">版权声明</span>
<img src="/images/copyright.png">
<br/>
<p style="font-size: 10px;line-height: 30px"><a href="https://jamfliu.github.io/" style="color:#258FC6">留阵~风~'s Notes</a> by <a href="https://jamfliu.github.io/" style="color:#258FC6">Jamefeng</a> is licensed under a <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" style="color:#258FC6">Creative Commons BY-NC-ND 4.0 International License</a>.<br/>
由<a href="https://jamfliu.github.io/" style="color:#258FC6">Jamefeng</a>创作并维护的<a href="jamfliu.github.io" style="color:#258FC6">留阵~风~'s Notes</a>博客采用<a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" style="color:#258FC6">创作共用保留署名-非商业-禁止演绎4.0国际许可证</a>。<br/>
本文首发于<a href="https://jamfliu.github.io/" style="color:#258FC6">留阵~风~'s Notes</a> 博客（ <a href="https://jamfliu.github.io/" style="color:#258FC6">https://jamfliu.github.io/</a> ），版权所有，侵权必究。</p>
</div>
</div>


      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/git/" rel="tag"># git</a>
          
            <a href="/tags/git-remote/" rel="tag"># git remote</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/05/15/how-to-use-the-theme-next-for-hexo/" rel="next" title="【原创】如何使用hexo的NexT主题">
                <i class="fa fa-chevron-left"></i> 【原创】如何使用hexo的NexT主题
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="lv-container" data-id="city" data-uid="MTAyMC8yODY3NS81MjQ2"></div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/lzf.png"
               alt="jamefeng" />
          <p class="site-author-name" itemprop="name">jamefeng</p>
           
              <p class="site-description motion-element" itemprop="description">冰冻三尺非一日之寒</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/jamfliu" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/jamfliu" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  微博
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#一、名词解释"><span class="nav-number">1.</span> <span class="nav-text">一、名词解释</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#二、Git和SVN的对比"><span class="nav-number">2.</span> <span class="nav-text">二、Git和SVN的对比</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Git的优势"><span class="nav-number">2.1.</span> <span class="nav-text">Git的优势</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-操作速度快"><span class="nav-number">2.1.1.</span> <span class="nav-text">1. 操作速度快</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-支持离线工作，减轻解决合并的冲突的工作，更好地协同开发"><span class="nav-number">2.1.2.</span> <span class="nav-text">2. 支持离线工作，减轻解决合并的冲突的工作，更好地协同开发</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-更好的回退机制"><span class="nav-number">2.1.3.</span> <span class="nav-text">3. 更好的回退机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-工作进度空间的保留"><span class="nav-number">2.1.4.</span> <span class="nav-text">4. 工作进度空间的保留</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-分布式存储，可减少故障时丢失代码"><span class="nav-number">2.1.5.</span> <span class="nav-text">5.分布式存储，可减少故障时丢失代码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-现在已经流行，很多社区和大公司在用，有学习和使用的必要"><span class="nav-number">2.1.6.</span> <span class="nav-text">6.现在已经流行，很多社区和大公司在用，有学习和使用的必要</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Git的劣势"><span class="nav-number">2.2.</span> <span class="nav-text">Git的劣势</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#学习成本不低"><span class="nav-number">2.2.1.</span> <span class="nav-text">学习成本不低</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#资源权限控制弱"><span class="nav-number">2.2.2.</span> <span class="nav-text">资源权限控制弱</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不支持支持局部更新"><span class="nav-number">2.2.3.</span> <span class="nav-text">不支持支持局部更新</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#三、Git本地上主要功能以及常用的指令"><span class="nav-number">3.</span> <span class="nav-text">三、Git本地上主要功能以及常用的指令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-创建空Git库-或者-重置"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 创建空Git库 或者 重置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-查询"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-查看当前空间以及暂存区的状态-（git-status-git-diff）"><span class="nav-number">3.2.1.</span> <span class="nav-text">1.查看当前空间以及暂存区的状态 （git-status,git-diff）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-git-log查提交记录"><span class="nav-number">3.2.2.</span> <span class="nav-text">2.git-log查提交记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-git-reflog-查操作记录"><span class="nav-number">3.2.3.</span> <span class="nav-text">3.git-reflog 查操作记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-git-blame-文件追溯"><span class="nav-number">3.2.4.</span> <span class="nav-text">4.git-blame 文件追溯</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-git-branch-查看分支"><span class="nav-number">3.2.5.</span> <span class="nav-text">5.git-branch 查看分支</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-添加到暂存区"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 添加到暂存区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-提交到本地仓库"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 提交到本地仓库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-删除"><span class="nav-number">3.5.</span> <span class="nav-text">3.5 删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-想后悔（撤销）"><span class="nav-number">3.6.</span> <span class="nav-text">3.6 想后悔（撤销）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-修改提交信息"><span class="nav-number">3.6.1.</span> <span class="nav-text">1.修改提交信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-压缩历史记录"><span class="nav-number">3.6.2.</span> <span class="nav-text">2.压缩历史记录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-还原文件（可用交互方式）"><span class="nav-number">3.6.3.</span> <span class="nav-text">3.还原文件（可用交互方式）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-分支管理"><span class="nav-number">3.7.</span> <span class="nav-text">3.6 分支管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-查看分支（git-branch）"><span class="nav-number">3.7.1.</span> <span class="nav-text">1.查看分支（git branch）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-创建分支（git-branch-和git-checkout-b）"><span class="nav-number">3.7.2.</span> <span class="nav-text">2.创建分支（git branch 和git checkout -b）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-切换分支-git-checkout"><span class="nav-number">3.7.3.</span> <span class="nav-text">3.切换分支(git checkout)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-从远程更新分支-git-fetch-和-git-pull"><span class="nav-number">3.7.4.</span> <span class="nav-text">4.从远程更新分支(git fetch 和 git pull)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-删除分支"><span class="nav-number">3.7.5.</span> <span class="nav-text">5.删除分支</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-合并分支"><span class="nav-number">3.7.6.</span> <span class="nav-text">6.合并分支</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-解决冲突"><span class="nav-number">3.7.7.</span> <span class="nav-text">7.解决冲突</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#四、Git与远程交互的一些操作"><span class="nav-number">4.</span> <span class="nav-text">四、Git与远程交互的一些操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-获取远程Git项目"><span class="nav-number">4.1.</span> <span class="nav-text">4.1 获取远程Git项目</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-关联远程仓库"><span class="nav-number">4.2.</span> <span class="nav-text">4.2 关联远程仓库</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#五、参考网站"><span class="nav-number">5.</span> <span class="nav-text">五、参考网站</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jamefeng</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (search_path.endsWith("json")) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("RRpPl3beWKn2TycBqKs6y22c-gzGzoHsz", "AXO0Ql8DsD0jEmw8oQE3aSpP");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

</body>
</html>
